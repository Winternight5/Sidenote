<html>
    <head>
        <!-- this break the color after typing in input
        <meta name="theme-color" content="{{ theme.browser }}">
        <meta name="msapplication-navbutton-color" content="{{ theme.browser }}">
        <meta name="apple-mobile-web-app-status-bar-style" content="{{ theme.browser }}">-->
        <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta http-equiv="X-UA-Compatible" content="">
        {% if title %}
        <title>{{ title }} - Sidenote</title>
        {% else %}
        <title>microblog</title>
        {% endif %}
        <meta name="description" content="Sidenote for everyone">
        <meta name="author" content="Tai Huynh">
        <style>
            body {
                touch-action: manipulation;
            }
        </style>
    </head>
    <body class="{{ theme.background }}" id="data-list">
  <div id="menu">
  <nav id="navMenu" class="menu {{ theme.nav }} {{ theme.font_header }}" data-target="menu" style="z-index: 500">
    <div class="nav-wrapper">
    {% if title == "Home" %}
      <a href="#" data-target="slide-out" class="sidenav-trigger"><i class="large material-icons">menu</i></a>
      <ul id="nav-mobile" class="left hide-on-med-and-down">
        <li><a href="javascript:void(0)" onclick="$('.sidenav').sidenav('open')" class="waves-effect"><i class="material-icons">menu</i></a></li>
        <li><a href="{{ url_for('newpost') }}" class="waves-effect"><i class="material-icons">brush</i></a></li>
        <li><a href="{{ url_for('newpost') }}" class="waves-effect"><i class="material-icons">event_available</i></a></li>
        <li><a href="{{ url_for('newpost') }}" class="waves-effect"><i class="material-icons">event_note</i></a></li>
      </ul>
      
      <form autocomplete="off" class="right">
        <div class="input-field">
          <input id="search" type="search" class="search" required>
          <label class="label-icon" for="search"><i class="material-icons left">search</i></label>
          <i class="material-icons">close</i>
        </div>
      </form>
      
    {% elif title == "New Post" %}
      <a href="{{ url_for('index') }}" class="left"><i class="large material-icons">arrow_back</i></a>
      <ul class="right">
        <li><a href="javascript:void(0)" onclick="submitForm()" class="waves-effect"><i class="material-icons">save</i></a></li>
        <li><a href="javascript:void(0)" class="waves-effect"><i class="material-icons">event_available</i></a></li>
        <li><a href="javascript:void(0)" class="waves-effect"><i class="material-icons">brush</i></a></li>
      </ul>
    {% endif %}
    </div>
  </nav>

    <ul id="slide-out" class="sidenav {{ theme.background }}">
    <li><div class="user-view">
        <div class="background">
            <img src="{{url_for('static', filename='images/office.jpg')}}">
        </div>
        <a href="#user"><img src="{{url_for('static', filename='images/yuna.jpg')}}" class="circle"></a>
        <p><a href="#name"><span class="white-text name">{{ current_user.firstname }} {{ current_user.lastname }}</span></a>
        <br>
    </div></li>
    {% if current_user.is_authenticated %}
    <li><a class="subheader {{ theme.font }}">Tags</a></li>
    <li><a href="{{ url_for('newpost') }}" class="waves-effect {{ theme.font }}"><i class="material-icons {{ theme.font }}">error_outline</i>Important</a></li>
    <li><a href="{{ url_for('newpost') }}" class="waves-effect {{ theme.font }}"><i class="material-icons {{ theme.font }}">access_time</i>Recent Untag</a></li>
    <li><a href="{{ url_for('newpost') }}" class="waves-effect {{ theme.font }}"><i class="material-icons {{ theme.font }}">local_offer</i>#Homework</a></li>
    <li><a href="{{ url_for('newpost') }}" class="waves-effect {{ theme.font }}"><i class="material-icons {{ theme.font }}">local_offer</i>#School</a></li>
    
    <li><div class="divider"></div></li>
    
    <li><a href="{{ url_for('changetheme') }}" class="waves-effect {{ theme.font }}"><i class="material-icons {{ theme.font }}">brightness_6</i>{{ theme.switch }}</a></li>
    <li><a href="{{ url_for('index') }}" class="waves-effect {{ theme.font }}"><i class="material-icons {{ theme.font }}">settings</i>Setting</a></li>
    <li><a href="{{ url_for('logout') }}" class="waves-effect {{ theme.font }}"><i class="material-icons {{ theme.font }}">power_settings_new</i>Logout</a></li>
    {% endif %}
    </ul>

    {% block content %}{% endblock %}
    
    {% if title == "Home" %}<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>{% endif %}
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
    <script>
      document.addEventListener('DOMContentLoaded', function() {
        options = {
            draggable: true,
            preventScrolling: true
        }
        var elems = document.querySelectorAll('.sidenav');
        var instances = M.Sidenav.init(elems, options);
      });
      
      $(document).ready(function(){
        $('.sidenav').sidenav();
        
        menu = $('.menu');
        target = $('#' +menu.attr("data-target"));
        
        menu.pushpin({
          top: target.offset().top
        });
      });
    </script>
    </body>
    
</html>